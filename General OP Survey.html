<!DOCTYPE html>
<html lang="en">

<head>
        <meta charset="UTF-8">
        <title>AKH Outpatient Feedback</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <style>
                :root {
                        --bg1: #f0f9ff;
                        --bg2: #e0f2fe;
                        --card: #ffffff;
                        --text: #0f172a;
                        --muted: #64748b;
                        --primary: #2563eb;
                        --primary2: #7c3aed;
                        --accent: #22c55e;
                        --border: #e2e8f0;
                }

                * {
                        box-sizing: border-box
                }

                body {
                        margin: 0;
                        font-family: "Segoe UI", system-ui, -apple-system, Roboto, Arial, sans-serif;
                        color: var(--text);
                        background: linear-gradient(180deg, var(--bg1), var(--bg2));
                }

                .container {
                        max-width: 700px;
                        margin: 0 auto;
                        padding: 20px;
                }

                .header {
                        background: var(--card);
                        border: 1px solid var(--border);
                        border-radius: 16px;
                        padding: 20px;
                        box-shadow: 0 10px 24px rgba(0, 0, 0, 0.06);
                        margin-bottom: 16px;
                }

                .header h1 {
                        margin: 0 0 6px;
                        font-size: 24px
                }

                .header p {
                        margin: 0;
                        color: var(--muted)
                }

                .progress {
                        height: 10px;
                        background: #e5e7eb;
                        border-radius: 999px;
                        overflow: hidden;
                        margin: 16px 0 0
                }

                .progress-bar {
                        height: 100%;
                        width: 0%;
                        background: linear-gradient(90deg, var(--primary), var(--primary2));
                        transition: width .3s
                }

                .page {
                        display: none;
                        background: var(--card);
                        border: 1px solid var(--border);
                        border-radius: 16px;
                        padding: 24px;
                        box-shadow: 0 10px 24px rgba(0, 0, 0, 0.06);
                        animation: fade .35s ease;
                }

                .page.active {
                        display: block
                }

                @keyframes fade {
                        from {
                                opacity: .0;
                                transform: translateY(10px)
                        }

                        to {
                                opacity: 1;
                                transform: translateY(0)
                        }
                }

                h2 {
                        font-size: 22px;
                        margin: 0 0 14px
                }

                .hint {
                        color: var(--muted);
                        font-size: 14px;
                        margin-bottom: 10px
                }

                .options {
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
                        gap: 10px
                }

                .option {
                        padding: 14px;
                        border-radius: 12px;
                        border: 1px solid var(--border);
                        background: #f8fafc;
                        cursor: pointer;
                        transition: transform .15s ease, background .15s ease, border-color .15s ease;
                        display: flex;
                        gap: 10px;
                        align-items: center;
                }

                .option:hover {
                        transform: translateY(-1px);
                        background: #fff;
                        border-color: #dbeafe
                }

                .emoji {
                        font-size: 20px
                }

                .actions {
                        display: flex;
                        gap: 10px;
                        flex-wrap: wrap;
                        margin-top: 12px
                }

                .input {
                        width: 100%;
                        padding: 12px 14px;
                        border: 1px solid var(--border);
                        border-radius: 10px;
                        background: #f8fafc;
                        outline: none;
                }

                .input:focus {
                        border-color: var(--primary);
                        box-shadow: 0 0 0 4px rgba(37, 99, 235, .15);
                        background: #fff
                }

                .btn {
                        appearance: none;
                        border: none;
                        border-radius: 10px;
                        padding: 12px 16px;
                        font-weight: 600;
                        cursor: pointer;
                }

                .btn-primary {
                        background: var(--primary);
                        color: #fff
                }

                .btn-secondary {
                        background: #e5e7eb;
                        color: #0f172a
                }

                .footer {
                        color: var(--muted);
                        font-size: 13px;
                        text-align: center;
                        margin: 16px 0 8px
                }

                #admin {
                        display: none;
                        text-align: center;
                        margin: 16px 0
                }

                #downloadBtn {
                        background: var(--primary);
                        color: #fff
                }

                .stars {
                        display: flex;
                        gap: 6px;
                }

                .star {
                        font-size: 32px;
                        color: #cbd5e1;
                        cursor: pointer;
                        transition: transform .12s, color .12s;
                }

                .star.active {
                        color: #f59e0b;
                }

                /* gold */
                .star:hover {
                        transform: scale(1.1);
                }
        </style>
</head>

<body>
        <form style="display: none;" id="opForm" method="post"
                action="https://script.google.com/macros/s/AKfycbzayBPkNSLsyXobbqfx1zMeMHc0lqGEEFY1QJoY6L5l-4EY08rTe8nyzMxajZBX18dfvg/exec">
                <input type="hidden" name="data" id="dataField">
        </form>
        <div class="container">
                <header class="header">
                        <h1>Asha Kiran Hospital</h1>
                        <p>Out Patient Feedback Form</p>
                        <div class="progress" aria-label="Progress">
                                <div id="progressBar" class="progress-bar"></div>
                        </div>
                </header>

                <!-- Q1 -->
                <section class="page active" id="q1">
                        <h2>üöë How many times have you visited this hospital?</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext(1,'Once')"><span class="emoji">1Ô∏è‚É£</span>Once
                                </div>
                                <div class="option" onclick="answerAndNext(1,'Twice')"><span
                                                class="emoji">2Ô∏è‚É£</span>Twice</div>
                                <div class="option" onclick="answerAndNext(1,'Many')"><span class="emoji">üîÅ</span>Many
                                </div>
                                <div class="option" onclick="answerAndNext(1,'Never')"><span
                                                class="emoji">üÜï</span>Never</div>
                        </div>
                </section>

                <!-- Q2 -->
                <section class="page" id="q2">
                        <h2>üíä Did you have any medical treatment for this illness before visiting AKH?</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext(2,'Yes')"><span class="emoji">‚úÖ</span>Yes
                                </div>
                                <div class="option" onclick="answerAndNext(2,'No')"><span class="emoji">‚ùå</span>No</div>
                        </div>
                        <p class="hint">If you select ‚ÄúYes‚Äù, we‚Äôll ask where.</p>
                </section>

                <!-- Q3 (conditional: only if Q2 = Yes) -->
                <section class="page" id="q3">
                        <h2>üè• If yes, where did you receive treatment?</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext(3,'Govt. Hospital')"><span
                                                class="emoji">üèõÔ∏è</span>Govt. Hospital</div>
                                <div class="option" onclick="answerAndNext(3,'Private Hospital')"><span
                                                class="emoji">üè©</span>Private Hospital</div>
                                <div class="option" onclick="setOtherText(3,'Other')"><span class="emoji">‚úçÔ∏è</span>Other
                                        (specify)</div>
                        </div>
                        <div class="actions" id="other3" style="display:none;">
                                <input id="other3Input" class="input" type="text" placeholder="Type other and continue">
                                <button class="btn btn-primary" onclick="submitOther(3,'Other')">Continue</button>
                        </div>
                </section>

                <!-- Q4 -->
                <section class="page" id="q4">
                        <h2>üì£ How did you hear about AKH?</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext(4,'Family/Friend/Previous Patient')"><span
                                                class="emoji">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>Family / Friend / Previous Patient</div>
                                <div class="option" onclick="answerAndNext(4,'CHW/Pastor referral')"><span
                                                class="emoji">‚õ™</span>Referral from CHW / Pastor</div>
                                <div class="option" onclick="answerAndNext(4,'ASHA/Govt Officer referral')"><span
                                                class="emoji">üè¢</span>Referral from ASHA / Govt. Officer</div>
                                <div class="option" onclick="answerAndNext(4,'Market camp')"><span
                                                class="emoji">üõçÔ∏è</span>Heard through a market camp</div>
                                <div class="option" onclick="answerAndNext(4,'Another Hospital referral')"><span
                                                class="emoji">üè•</span>Referral from another Hospital</div>
                        </div>
                </section>

                <!-- Q5 -->
                <section class="page" id="q5">
                        <h2>üöó How did you travel to the hospital?</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext(5,'Walked')"><span
                                                class="emoji">üö∂</span>Walked</div>
                                <div class="option" onclick="answerAndNext(5,'Public Vehicle')"><span
                                                class="emoji">üöå</span>Public Vehicle</div>
                                <div class="option" onclick="answerAndNext(5,'Private Vehicle')"><span
                                                class="emoji">üöó</span>Private Vehicle</div>
                                <div class="option" onclick="setOtherText(5,'Other')"><span class="emoji">‚úçÔ∏è</span>Other
                                        (specify)</div>
                        </div>
                        <div class="actions" id="other5" style="display:none;">
                                <input id="other5Input" class="input" type="text" placeholder="Type other and continue">
                                <button class="btn btn-primary" onclick="submitOther(5,'Other')">Continue</button>
                        </div>
                </section>

                <!-- Q6 (conditional: only if Q5 = Private Vehicle) -->
                <section class="page" id="q6">
                        <h2>üÖøÔ∏è If private vehicle, was parking a problem?</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext(6,'Yes')"><span class="emoji">‚ö†Ô∏è</span>Yes
                                </div>
                                <div class="option" onclick="answerAndNext(6,'No')"><span class="emoji">‚úÖ</span>No</div>
                        </div>
                </section>

                <!-- Q7 -->
                <section class="page" id="q7">
                        <h2>üß≠ Did you have difficulty finding your way around the hospital?</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext(7,'Yes')"><span class="emoji">üß©</span>Yes
                                </div>
                                <div class="option" onclick="answerAndNext(7,'No')"><span class="emoji">üó∫Ô∏è</span>No
                                </div>
                        </div>
                </section>

                <!-- Q8 -->
                <section class="page" id="q8">
                        <h2>üßº Was the hospital (including toilets) clean?</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext(8,'Yes')"><span class="emoji">‚ú®</span>Yes
                                </div>
                                <div class="option" onclick="answerAndNext(8,'No')"><span class="emoji">üö´</span>No
                                </div>
                        </div>
                </section>

                <!-- Q9 (conditional: only if Q8 = No) -->
                <section class="page" id="q9">
                        <h2>üßπ If no, which part?</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext(9,'Toilets')"><span
                                                class="emoji">üöª</span>Toilets</div>
                                <div class="option" onclick="answerAndNext(9,'Wards')"><span
                                                class="emoji">üõèÔ∏è</span>Wards</div>
                                <div class="option" onclick="setOtherText(9,'Other')"><span class="emoji">‚úçÔ∏è</span>Other
                                        (specify)</div>
                        </div>
                        <div class="actions" id="other9" style="display:none;">
                                <input id="other9Input" class="input" type="text" placeholder="Type other and continue">
                                <button class="btn btn-primary" onclick="submitOther(9,'Other')">Continue</button>
                        </div>
                </section>

                <!-- Q10a (streamlined overall to keep fast) -->
                <!-- <section class="page" id="q10a">
                        <h2>üôÇ Politeness of staff ‚Äî overall</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext('10a','Good')">Good</div>
                                <div class="option" onclick="answerAndNext('10a','Average')">Average</div>
                                <div class="option" onclick="answerAndNext('10a','Bad')">Bad</div>
                                <div class="option" onclick="answerAndNext('10a','Very Bad')">Very Bad</div>
                        </div>
                        <p class="hint">Compressed from the table to save time.</p>
                </section> -->

                <!-- Q10b -->
                <!-- <section class="page" id="q10b">
                        <h2>üó£Ô∏è Explanations ‚Äî overall</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext('10b','Good')">Good</div>
                                <div class="option" onclick="answerAndNext('10b','Average')">Average</div>
                                <div class="option" onclick="answerAndNext('10b','Bad')">Bad</div>
                                <div class="option" onclick="answerAndNext('10b','Very Bad')">Very Bad</div>
                        </div>
                </section> -->

                <!-- Q10c -->
                <!-- <section class="page" id="q10c">
                        <h2>‚è±Ô∏è Waiting time ‚Äî overall</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext('10c','Good')">Good</div>
                                <div class="option" onclick="answerAndNext('10c','Average')">Average</div>
                                <div class="option" onclick="answerAndNext('10c','Bad')">Bad</div>
                                <div class="option" onclick="answerAndNext('10c','Very Bad')">Very Bad</div>
                        </div>
                </section> -->

                <!-- Q11 -->
                <section class="page" id="q11">
                        <h2>üí∞ Was the cost of treatment expected or unexpected?</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext(11,'Expected')"><span
                                                class="emoji">‚úÖ</span>Expected</div>
                                <div class="option" onclick="answerAndNext(11,'Unexpected')"><span
                                                class="emoji">‚ö†Ô∏è</span>Unexpected</div>
                        </div>
                </section>

                <!-- Q12 (open text) -->
                <section class="page" id="q12">
                        <h2>üí¨ How?</h2>
                        <input id="q12Input" class="input" type="text" placeholder="Briefly explain">
                        <div class="actions">
                                <button class="btn btn-primary" onclick="submitText(12,'q12Input')">Next</button>
                        </div>
                </section>

                <!-- Q13 (stars) -->
                <section class="page" id="q13">
                        <h2>‚≠ê How would you rate your overall experience?</h2>
                        <!-- <div class="options">
                                <div class="option" onclick="answerAndNext(13,'1')">‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ</div>
                                <div class="option" onclick="answerAndNext(13,'2')">‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ</div>
                                <div class="option" onclick="answerAndNext(13,'3')">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ</div>
                                <div class="option" onclick="answerAndNext(13,'4')">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                                <div class="option" onclick="answerAndNext(13,'5')">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                        </div> -->
                        <div id="starRating" class="stars"></div>
                        <p id="starValue"></p>
                </section>

                <!-- Q14 -->
                <section class="page" id="q14">
                        <h2>üîÑ Would you visit this hospital again?</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext(14,'Yes')"><span class="emoji">‚úÖ</span>Yes
                                </div>
                                <div class="option" onclick="answerAndNext(14,'No')"><span class="emoji">‚ùå</span>No
                                </div>
                        </div>
                </section>

                <!-- Q15 (open text) -->
                <section class="page" id="q15">
                        <h2>üìù Why?</h2>
                        <input id="q15Input" class="input" type="text" placeholder="Your reason">
                        <div class="actions">
                                <button class="btn btn-primary" onclick="submitText(15,'q15Input')">Next</button>
                        </div>
                </section>

                <!-- Q16 -->
                <section class="page" id="q16">
                        <h2>üéÇ Your age?</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext(16,'15-30')">15‚Äì30 yrs</div>
                                <div class="option" onclick="answerAndNext(16,'30-45')">30‚Äì45 yrs</div>
                                <div class="option" onclick="answerAndNext(16,'45-60')">45‚Äì60 yrs</div>
                                <div class="option" onclick="answerAndNext(16,'Above 60')">Above 60</div>
                        </div>
                </section>

                <!-- Q17 -->
                <section class="page" id="q17">
                        <h2>üéì Your education status?</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext(17,'No Schooling')">No Schooling</div>
                                <div class="option" onclick="answerAndNext(17,'1st-5th Std')">1st‚Äì5th Std</div>
                                <div class="option" onclick="answerAndNext(17,'6th-10th Std')">6th‚Äì10th Std</div>
                                <div class="option" onclick="answerAndNext(17,'+2 Passed')">+2 Passed</div>
                                <div class="option" onclick="answerAndNext(17,'College graduate')">College graduate
                                </div>
                        </div>
                </section>

                <!-- Q18 -->
                <section class="page" id="q18">
                        <h2>üíº Your job?</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext(18,'Farmer')">Farmer</div>
                                <div class="option" onclick="answerAndNext(18,'Govt. Employee')">Govt. Employee</div>
                                <div class="option" onclick="answerAndNext(18,'Salaried Employee')">Salaried Employee
                                </div>
                                <div class="option" onclick="setOtherText(18,'Other')"><span
                                                class="emoji">‚úçÔ∏è</span>Other (specify)</div>
                        </div>
                        <div class="actions" id="other18" style="display:none;">
                                <input id="other18Input" class="input" type="text"
                                        placeholder="Type other and continue">
                                <button class="btn btn-primary" onclick="submitOther(18,'Other')">Continue</button>
                        </div>
                </section>

                <!-- Q19 (open text) -->
                <section class="page" id="q19">
                        <h2>üõ†Ô∏è Suggestion to improve services</h2>
                        <input id="q19Input" class="input" type="text" placeholder="Your suggestion">
                        <div class="actions">
                                <button class="btn btn-primary" onclick="submitText(19,'q19Input')">Next</button>
                        </div>
                </section>

                <!-- Q20 (open text) -->
                <section class="page" id="q20">
                        <h2>üèóÔ∏è Suggestion to improve facilities</h2>
                        <input id="q20Input" class="input" type="text" placeholder="Your suggestion">
                        <div class="actions">
                                <button class="btn btn-primary" onclick="submitText(20,'q20Input')">Next</button>
                        </div>
                </section>

                <!-- Q21 -->
                <section class="page" id="q21">
                        <h2>üü© Have you heard anything positive about AKH?</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext(21,'Yes')"><span class="emoji">‚úÖ</span>Yes
                                </div>
                                <div class="option" onclick="answerAndNext(21,'No')"><span class="emoji">‚ùå</span>No
                                </div>
                        </div>
                </section>

                <!-- Q22 (open text, conditional if Q21 Yes) -->
                <section class="page" id="q22">
                        <h2>‚ú® What positive things have you heard?</h2>
                        <input id="q22Input" class="input" type="text" placeholder="Write a short note">
                        <div class="actions">
                                <button class="btn btn-primary" onclick="submitText(22,'q22Input')">Next</button>
                        </div>
                </section>

                <!-- Q23 -->
                <section class="page" id="q23">
                        <h2>üü• Have you heard anything negative about AKH?</h2>
                        <div class="options">
                                <div class="option" onclick="answerAndNext(23,'Yes')"><span class="emoji">‚ö†Ô∏è</span>Yes
                                </div>
                                <div class="option" onclick="answerAndNext(23,'No')"><span class="emoji">‚úÖ</span>No
                                </div>
                        </div>
                </section>

                <!-- Q24 (open text, conditional if Q23 Yes) -->
                <section class="page" id="q24">
                        <h2>üó£Ô∏è What negative things have you heard?</h2>
                        <input id="q24Input" class="input" type="text" placeholder="Write a short note">
                        <div class="actions">
                                <button class="btn btn-primary" onclick="submitText(24,'q24Input')">Finish</button>
                        </div>
                </section>

                <!-- Final -->
                <section class="page" id="qFinal">
                        <h2>üéâ Thank you!</h2>
                        <p>Your feedback has been recorded. We value your experience at AKH</p>
                        <div class="actions">
                                <button class="btn btn-secondary" onclick="restart()">Submit another</button>
                        </div>
                </section>

                <!-- Admin-only download -->
                <div id="admin">
                        <button class="btn" id="downloadBtn" onclick="downloadAll()">Download all responses</button>
                </div>

                <p class="footer">Made with care ‚Äî AKH</p>
        </div>

        <script>
                // State
                const responses = {};
                const submissionsKey = "akh_op_feedback_submissions";
                const pages = [
                        "q1", "q2", "q3", "q4", "q5", "q6", "q7", "q8", "q9", //"q10a", "q10b", "q10c",
                        "q11", "q12", "q13", "q14", "q15", "q16", "q17", "q18", "q19", "q20", "q21", "q22", "q23", "q24", "qFinal"
                ];
                let currentIndex = 0;

                function showPage(id) {
                        document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
                        const el = document.getElementById(id);
                        if (el) el.classList.add("active");
                        updateProgress();
                }

                function updateProgress() {
                        // Count only pages that will be asked based on conditional logic progress
                        const progress = Math.round(((currentIndex) / (pages.length)) * 100);
                        document.getElementById("progressBar").style.width = progress + "%";
                }

                function nextByLogic() {
                        // Determine next page considering skip logic
                        let nextId = null;
                        for (let i = currentIndex + 1; i < pages.length; i++) {
                                const pid = pages[i];

                                // Skip Q3 if Q2 != Yes
                                if (pid === "q3" && responses["Q2"] !== "Yes") continue;
                                // Skip Q6 if Q5 != Private Vehicle
                                if (pid === "q6" && responses["Q5"] !== "Private Vehicle") continue;
                                // Skip Q9 if Q8 != No
                                if (pid === "q9" && responses["Q8"] !== "No") continue;
                                // Skip Q22 if Q21 != Yes
                                if (pid === "q22" && responses["Q21"] !== "Yes") continue;
                                // Skip Q24 if Q23 != Yes
                                if (pid === "q24" && responses["Q23"] !== "Yes") continue;
                                //call the collect responses function
                                if (pid === "qFinal") submitSurvey();

                                nextId = pid;
                                currentIndex = i;
                                break;
                        }
                        if (nextId) {
                                showPage(nextId);
                        } else {
                                // Save submission, go to final
                                persistSubmission();
                                showPage("qFinal");
                        }
                }

                function answerAndNext(qNum, answer) {
                        responses["Q" + qNum] = answer;
                        nextByLogic();
                }

                function setOtherText(qNum, label) {
                        const wrap = document.getElementById("other" + qNum);
                        if (wrap) wrap.style.display = "flex";
                        const input = document.getElementById("other" + qNum + "Input");
                        if (input) input.focus();
                        // Store preliminary label to denote "Other"
                        responses["Q" + qNum] = label;
                }

                function submitOther(qNum, label) {
                        const val = (document.getElementById("other" + qNum + "Input") || {}).value || "";
                        responses["Q" + qNum + "_other"] = val.trim();
                        nextByLogic();
                }

                function submitText(qNum, inputId) {
                        const val = (document.getElementById(inputId) || {}).value || "";
                        responses["Q" + qNum] = val.trim();
                        nextByLogic();
                }

                function persistSubmission() {
                        const all = JSON.parse(localStorage.getItem(submissionsKey) || "[]");
                        all.push({ ...responses, submittedAt: new Date().toISOString() });
                        localStorage.setItem(submissionsKey, JSON.stringify(all));
                }

                function restart() {
                        // Reset state for a new submission
                        for (const k in responses) delete responses[k];
                        currentIndex = 0;
                        // Clear text inputs and other boxes
                        document.querySelectorAll("input").forEach(i => i.value = "");
                        // Hide "other" boxes
                        [3, 5, 9, 18].forEach(n => {
                                const el = document.getElementById("other" + n);
                                if (el) el.style.display = "none";
                        });
                        showPage("q1");
                }

                function downloadAll() {
                        const all = localStorage.getItem(submissionsKey) || "[]";
                        const blob = new Blob([all], { type: "application/json" });
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement("a");
                        a.href = url; a.download = "akh-op-feedback-responses.json";
                        document.body.appendChild(a); a.click(); document.body.removeChild(a);
                        URL.revokeObjectURL(url);
                }

                // Admin visibility via URL
                const params = new URLSearchParams(window.location.search);
                if (params.get("admin") === "true") {
                        document.getElementById("admin").style.display = "block";
                }

                // Initialize first page
                showPage("q1");

                //stars
                function buildStars(qId) {
                        const wrap = document.getElementById("starRating");
                        wrap.innerHTML = "";
                        for (let i = 1; i <= 5; i++) {
                                const s = document.createElement("span");
                                s.className = "star"; s.textContent = "‚òÖ";
                                s.addEventListener("click", () => {
                                        // highlight stars immediately
                                        wrap.querySelectorAll(".star").forEach((st, idx) => st.classList.toggle("active", idx < i));
                                        document.getElementById("starValue").textContent = "Selected: " + i;

                                        // record answer
                                        responses["Q" + qId] = i;

                                        // wait 2‚Äì3 seconds, then move to next page
                                        setTimeout(() => {
                                                // goNext();
                                                answerAndNext(qId, i);
                                        }, 1000); // 2500ms = 2.5 seconds
                                });
                                wrap.appendChild(s);
                        }
                }

                // build stars for Q13
                buildStars(13);
                // function submitSurvey() {

                //         document.getElementById("surveyForm").addEventListener("submit", function (e) {
                //                 e.preventDefault();

                //                 // Collect values by ID
                //         //         "q1", "q2", "q3", "q4", "q5", "q6", "q7", "q8", "q9", //"q10a", "q10b", "q10c",
                //         // "q11", "q12", "q13", "q14", "q15", "q16", "q17", "q18", "q19", "q20", "q21", "q22", "q23", "q24"
                //                 const data = {
                //                         q1: document.getElementById("q1").value,
                //                         q2: document.getElementById("q2").value,
                //                         q3: document.getElementById("q3").value,
                //                         q4: document.getElementById("q4").value,
                //                         q5: document.getElementById("q5").value,
                //                         q6: document.getElementById("q6").value,
                //                         q7: document.getElementById("q7").value,
                //                         q8: document.getElementById("q8").value,
                //                         q9: document.getElementById("q9").value,
                //                         q11: document.getElementById("q11").value,
                //                         q12: document.getElementById("q12").value,
                //                         q13: document.getElementById("q13").value,
                //                         q14: document.getElementById("q14").value,
                //                         q15: document.getElementById("q15").value,
                //                         q16: document.getElementById("q16").value,
                //                         q17: document.getElementById("q17").value,
                //                         q18: document.getElementById("q18").value,
                //                         q19: document.getElementById("q19").value,
                //                         q20: document.getElementById("q20").value,
                //                         q21: document.getElementById("q21").value,
                //                         q22: document.getElementById("q22").value,
                //                         q23: document.getElementById("q23").value,
                //                         q24: document.getElementById("q24").value,
                //                 };

                //                 // Send to Google Apps Script Web App
                //                 fetch("https://script.google.com/macros/s/AKfycbzayBPkNSLsyXobbqfx1zMeMHc0lqGEEFY1QJoY6L5l-4EY08rTe8nyzMxajZBX18dfvg/exec", {
                //                         method: "POST",
                //                         body: JSON.stringify(data)
                //                 })
                //                         .then(res => {
                //                                 document.getElementById("surveyForm").style.display = "none";
                //                                 document.getElementById("thankyou").style.display = "block";
                //                         })
                //                         .catch(err => alert("Error submitting response: " + err));
                //         });
                // }

                function submitSurvey() {
                        // fetch("https://script.google.com/macros/s/AKfycbzayBPkNSLsyXobbqfx1zMeMHc0lqGEEFY1QJoY6L5l-4EY08rTe8nyzMxajZBX18dfvg/exec", {
                        //         method: "POST",
                        //         body: new URLSearchParams({
                        //                 data:JSON.stringify(responses)
                        //         })
                        //         //body: JSON.stringify(responses),
                        //         //headers: { "Content-Type": "application/json" }
                        // })
                        //         .then(res => res.text())
                        //         .then(text => {
                        //                 console.log("Server response:", text);
                        //                 showPage("qFinal");
                        //         })
                        //         .catch(err => alert("Error submitting: " + err));
                        // document.querySelector("#dataField").value = - JSON.stringify(responses);
                        // document.querySelector("#opForm").submit();
                        const url = "https://script.google.com/macros/s/AKfycbzayBPkNSLsyXobbqfx1zMeMHc0lqGEEFY1QJoY6L5l-4EY08rTe8nyzMxajZBX18dfvg/exec"
                                + "?data=" + encodeURIComponent(JSON.stringify(responses));

                        const img = new Image();
                        img.src = url;
                }
        </script>
</body>

</html>